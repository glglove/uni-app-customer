(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-webSocket-testWebSocket"],{a7cf:function(t,n,e){"use strict";e.r(n);var o=e("c900"),c=e("c8f8");for(var s in c)"default"!==s&&function(t){e.d(n,t,function(){return c[t]})}(s);var i=e("2877"),u=Object(i["a"])(c["default"],o["a"],o["b"],!1,null,null,null);n["default"]=u.exports},bd33:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("a34a"));function c(t){return t&&t.__esModule?t:{default:t}}function s(t,n,e,o,c,s,i){try{var u=t[s](i),a=u.value}catch(r){return void e(r)}u.done?n(a):Promise.resolve(a).then(o,c)}function i(t){return function(){var n=this,e=arguments;return new Promise(function(o,c){var i=t.apply(n,e);function u(t){s(i,o,c,u,a,"next",t)}function a(t){s(i,o,c,u,a,"throw",t)}u(void 0)})}}var u={onLoad:function(){this.connectSocketInit()},data:function(){return{socketTask:null,is_open_socket:!1}},beforeDestroy:function(){this.closeSocket()},methods:{connectSocketInit:function(){var t=this;this.socketTask=uni.connectSocket({url:"ws://119.28.180.110:9099/echo",success:function(t){console.log("websocket连接成功")}}),this.socketTask.onOpen(function(n){console.log("WebSocket连接正常打开中...！"),t.is_open_socket=!0,t.socketTask.send({data:"uni-app发送一条消息",success:function(){var t=i(o.default.mark(function t(){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("消息发送成功");case 1:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()}),t.socketTask.onMessage(function(t){console.log("收到服务器内容："+t.data)})}),this.socketTask.onClose(function(){console.log("已经被关闭了")})},closeSocket:function(){this.socketTask.close({success:function(t){this.is_open_socket=!1,console.log("关闭成功",t)},fail:function(t){console.log("关闭失败",t)}})},clickRequest:function(){this.is_open_socket&&this.socketTask.send({data:"请求一次发送一次message",success:function(){var t=i(o.default.mark(function t(){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("消息发送成功");case 1:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()})},leave:function(){}}};n.default=u},c8f8:function(t,n,e){"use strict";e.r(n);var o=e("bd33"),c=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(n,t,function(){return o[t]})}(s);n["default"]=c.a},c900:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("container",[e("v-uni-view",{attrs:{slot:"container-slot",id:"websockets"},slot:"container-slot"},[e("v-uni-button",{attrs:{type:"primary"},on:{click:function(n){n=t.$handleEvent(n),t.clickRequest(n)}}},[t._v("点击发送请求")]),e("v-uni-button",{attrs:{type:"primary"},on:{click:function(n){n=t.$handleEvent(n),t.leave(n)}}},[t._v("离开页面")])],1)],1)},c=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return c})}}]);