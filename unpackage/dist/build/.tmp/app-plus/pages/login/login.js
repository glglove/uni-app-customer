(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{6891:function(e,n,t){"use strict";var o=t("db3f"),i=t.n(o);i.a},"8f0a":function(e,n,t){"use strict";t.r(n);var o=t("b3d9"),i=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,function(){return o[e]})}(r);n["default"]=i.a},b3d9:function(e,n,t){"use strict";(function(e,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;s(t("be11"));var i=s(t("e57f")),r=t("14dd"),a=t("2f62");function s(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){c(e,n,t[n])})}return e}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var f=function(){return t.e("pages/components/m-input/m-input").then(t.bind(null,"10fc"))},l={components:{mInput:f},mixins:[r.miniProApi],data:function(){return{providerList:[],hasProvider:!1,name:"",password:"",positionTop:0,toPageUrl:"../find/find",jumpType:"2"}},computed:u({},(0,a.mapGetters)(["forcedLogin","userToken"])),watch:{userToken:{handler:function(e,n){e&&this.switchPage("../find/find")},immediate:!0}},onLoad:function(e){try{this.toPageUrl=e.toPageUrl,this.jumpType=e.jumpType}catch(n){}},onReady:function(){this.initPosition(),this.initProvider()},methods:{initProvider:function(){var n=this,t=["weixin","qq","sinaweibo"];e.getProvider({service:"oauth",success:function(e){if(e.provider&&e.provider.length){for(var o=0;o<e.provider.length;o++)~t.indexOf(e.provider[o])&&n.providerList.push({value:e.provider[o],image:"../../static/"+e.provider[o]+".png"});n.hasProvider=!0}},fail:function(e){console.error(o("获取服务供应商失败："+JSON.stringify(e)," at pages\\login\\login.vue:240"))}})},initPosition:function(){this.positionTop=e.getSystemInfoSync().windowHeight-100},bindLogin:function(){var n=this,t={params:{loginAccount:this.name,password:this.password}};i.default.appLoginAndRegister(t).then(function(t){if(console.log(o("app登陆成功后打印 res",t," at pages\\login\\login.vue:363")),200===t.statusCode&&1===t.data.code){var i=t.data.data.token;t.data.data.customer;switch(n.setStorage("userToken",i),console.log(o("welecome中打印冲localstorage中获取到的userToken",e.getStorageSync("userToken")," at pages\\login\\login.vue:370")),n.$store.dispatch("setUserToken",i),n.toast("app登录成功"),n.getAppCid(),n.jumpType){case"1":n.switchPage(n.toPageUrl);break;case"2":n.redirectPage(n.toPageUrl);break;case"3":n.reLauchPage(n.toPageUrl);break;case"4":n.navigatePage(n.toPageUrl);break;default:n.switchPage("../find/find")}}else 200===t.statusCode&&1e3===t.data.code&&n.toast("登录密码不正确,请重新输入")})},oauth:function(n){var t=this;this.getDeviceApi().login({provider:n,success:function(i){console.log(o("[${value}]授权后 通过uni.login()获取到的返回结果res",JSON.stringify(i)," at pages\\login\\login.vue:415")),e.getUserInfo({provider:n,success:function(e){console.log(o("[".concat(n,"]授权登录后 通过uni.getUserInfo获取到的返回结果infoRes"),JSON.stringify(e)," at pages\\login\\login.vue:423")),t.getLoginToken(e)}})},fail:function(e){console.error(o("授权登录失败："+JSON.stringify(e)," at pages\\login\\login.vue:429"))}})},getLoginToken:function(e){var n={params:{}};i.default.getOpenId(n,!0).then(function(e){})},toWelecome:function(n){this.forcedLogin?e.reLaunch({url:"../main/main"}):e.navigateBack()}}};n.default=l}).call(this,t("6e42")["default"],t("0de9")["default"])},db3f:function(e,n,t){},e734:function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return i})},ff8b:function(e,n,t){"use strict";t.r(n);var o=t("e734"),i=t("8f0a");for(var r in i)"default"!==r&&function(e){t.d(n,e,function(){return i[e]})}(r);t("6891");var a=t("2877"),s=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,"4b7ecd97",null);n["default"]=s.exports}},[["3683","common/runtime","common/vendor"]]]);