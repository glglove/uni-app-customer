(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"0224":function(e,t,n){},"39fb":function(e,t,n){"use strict";n.r(t);var o=n("e8fe");for(var c in o)"default"!==c&&function(e){n.d(t,e,function(){return o[e]})}(c);n("65d0"),n("8cd5"),n("1b2d"),n("c99a");var a,u,i=n("2877"),r=Object(i["a"])(o["default"],a,u,!1,null,null,null);t["default"]=r.exports},c99a:function(e,t,n){"use strict";var o=n("0224"),c=n.n(o);c.a},cad4:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n("a34a")),a=r(n("dfcd")),u=(r(n("354c")),n("086f")),i=r(n("e57f"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,o,c,a,u){try{var i=e[a](u),r=i.value}catch(s){return void n(s)}i.done?t(r):Promise.resolve(r).then(o,c)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(o,c){var a=e.apply(t,n);function u(e){s(a,o,c,u,i,"next",e)}function i(e){s(a,o,c,u,i,"throw",e)}u(void 0)})}}var p={onLaunch:function(){var t=l(c.default.mark(function t(){return c.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this,console.log(e("App Launch"," at App.vue:20")),this.appCheckLocalStorageToken(),this.getAppCid();case 4:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),onShow:function(){console.log(e("App Show"," at App.vue:90"))},onHide:function(){console.log(e("App Hide"," at App.vue:94"))},methods:{getAppCid:function(){var t=this,n=plus.push.getClientInfo().clientid;console.log(e("获取到的应用clientid",n," at App.vue:101")),n?o.setStorage({key:"clientid",data:n,success:function(){console.log(e("clientid 存储success"," at App.vue:113"))}}):setTimeout(function(){n=plus.push.getClientInfo().clientid,console.log(e("setTimeOut后打印的clientid",n," at App.vue:105"))},4e3),plus.push.addEventListener("click",function(e){t.pushCallBack("click事件",e)}),plus.push.addEventListener("receive",function(e){t.pushCallBack("reciive事件",e)})},pushCallBack:function(e,t){o.showToast({title:"".concat(e,",消息内容：").concat(t)})},checkNewVersion:function(){if(console.log(e("-------检查小程序是否有新版本-------checkNewVersion----------"," at App.vue:146")),o.canIUse("getUpdateManager")){var t=o.getUpdateManager();t.onCheckForUpdate(function(t){console.log(e("---检查小程序是否有新版本---",t.hasUpdate," at App.vue:156"))}),t.onUpdateReady(function(){o.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(e){if(e.confirm)t.applyUpdate();else if(e.cancel)return!1}})}),t.onUpdateFailed(function(){o.hideLoading(),o.showModal({title:"升级失败",content:"新版本下载失败，请检查网络！",showCancel:!1})})}},chekWeixinLogin:function(){return new Promise(function(t,n){(0,u.getDeviceApi)().checkSession({success:function(){console.log(e("微信登录session_key未过期，ok"," at App.vue:190")),t(!0)},fail:function(){n("微信登录已过期"),console.log(e("expire"," at App.vue:200"))}})})},getAuthorizeStatus:function(){var t=l(c.default.mark(function t(n,a,i){var r,s;return c.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=this,n){t.next=4;break}return o.showToast({title:"请传入scope.type!"}),t.abrupt("return");case 4:return s={"scope.userInfo":"用户信息","scope.userLocation":"地理位置","scope.address":"通讯地址","scope.invoiceTitle":"发票排头","scope.invoice":"获取发票","scope.record":"录音功能","scope.werun":"微信运动步数","scope.writePhotosAlbum":"保存到相册","scope.camera":"摄像头"},t.abrupt("return",new Promise(function(t,o){(0,u.getDeviceApi)().getSetting().then(function(c){if(console.log(e("打印用户授权的情况集合------------",c," at App.vue:230")),c)c[1]&&c[1]["authSetting"]&&c[1]["authSetting"][n]?(console.log(e("--------------检测到已授权了：【".concat(s[n],"】 的权限---------")," at App.vue:235")),a&&a(),t(!0)):(console.log(e("----------检测到未授权：【".concat(s[n],"】 的权限-----------")," at App.vue:241")),i&&i(),t(!1));else try{(0,u.getDeviceApi)().getNetworkType({success:function(e){var t=e.networkType;"none"!=t?o("--------报错了-------------"):(r.error("网络异常"),o("--------网络异常，请先检查网络------------"))}})}catch(l){o("--------报错了-------")}})}));case 6:case"end":return t.stop()}},t,this)}));function n(e,n,o){return t.apply(this,arguments)}return n}(),authorizeAfter_login:function(){var t=l(c.default.mark(function t(){return c.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=l(c.default.mark(function t(n,u){var r;return c.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e("---调用login方法---"," at App.vue:282")),r="",t.next=5,o.login({success:function(){var t=l(c.default.mark(function t(s){var p,f,d,h,v;return c.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e("-----打印uni.login()登录后返回的code------",s.code," at App.vue:294")),r=s.code,!r){t.next=14;break}return t.next=6,o.getUserInfo({lang:"zh_CN"});case 6:p=t.sent,console.log(e("-----授权后通过uni.getUserInfo()获取用户信息返回的结果-----：",p[1]," at App.vue:302")),f=p[1],d=f.iv,h=f.encryptedData,f.signature,f.rawData,v={params:{code:r,encryptedData:h,iv:d,type:""}},i.default.getOpenId(v,!0).then(function(t){if(console.log(e("------------------",t," at App.vue:349")),t&&200==t.statusCode){var c=t.data;c&&1==c.code?(console.log(e("---网络请求返回成功---"," at App.vue:354")),console.log(e("-----调取后台login接口注册用户信息成功后获取openid成功------：",c," at App.vue:355")),a.default.dispatch("setUserToken",c.data.token),a.default.dispatch("setUserId",c.data.customer.id),n(!0)):1018==c.code||(o.showToast({title:"登陆失败"}),u("-----调用后台login接口后返回的状态有问题-----"),console.log(e("---------调用后台login接口后返回的状态有问题-------"," at App.vue:379")))}}).then(l(c.default.mark(function e(){return c.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))),t.next=16;break;case 14:u("---登陆微信后台 wx.login() 接口返回异常---"),console.log(e("---登陆微信后台 wx.login() 接口返回异常---"," at App.vue:392"));case 16:case"end":return t.stop()}},t,this)}));function s(e){return t.apply(this,arguments)}return s}(),fail:function(t){console.log(e("-----打印登录后------",t," at App.vue:397"))}});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(e(t.t0," at App.vue:401")),u(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),appCheckLocalStorageToken:function(){return new Promise(function(e,t){var n=o.getStorageSync("userToken");n&&a.default.dispatch("setUserToken",n)})}}};t.default=p}).call(this,n("0de9")["default"],n("6e42")["default"])},e8fe:function(e,t,n){"use strict";n.r(t);var o=n("cad4"),c=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=c.a}},[["9aa8","common/runtime","common/vendor"]]]);