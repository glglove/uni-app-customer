(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"0224":function(e,t,n){},"39fb":function(e,t,n){"use strict";n.r(t);var o=n("e8fe");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("65d0"),n("8cd5"),n("1b2d"),n("c99a");var c,r,u=n("2877"),i=Object(u["a"])(o["default"],c,r,!1,null,null,null);t["default"]=i.exports},c99a:function(e,t,n){"use strict";var o=n("0224"),a=n.n(o);a.a},cad4:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("a34a")),c=i(n("dfcd")),r=(i(n("354c")),n("086f")),u=i(n("e57f"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,o,a,c,r){try{var u=e[c](r),i=u.value}catch(s){return void n(s)}u.done?t(i):Promise.resolve(i).then(o,a)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var c=e.apply(t,n);function r(e){s(c,o,a,r,u,"next",e)}function u(e){s(c,o,a,r,u,"throw",e)}r(void 0)})}}var l={onLaunch:function(){var t=p(a.default.mark(function t(){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this,console.log(e("App Launch"," at App.vue:20"));case 2:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),onShow:function(){console.log(e("App Show"," at App.vue:81"))},onHide:function(){console.log(e("App Hide"," at App.vue:85"))},methods:{checkNewVersion:function(){if(console.log(e("-------检查小程序是否有新版本-------checkNewVersion----------"," at App.vue:91")),o.canIUse("getUpdateManager")){var t=o.getUpdateManager();t.onCheckForUpdate(function(t){console.log(e("---检查小程序是否有新版本---",t.hasUpdate," at App.vue:101"))}),t.onUpdateReady(function(){o.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(e){if(e.confirm)t.applyUpdate();else if(e.cancel)return!1}})}),t.onUpdateFailed(function(){o.hideLoading(),o.showModal({title:"升级失败",content:"新版本下载失败，请检查网络！",showCancel:!1})})}},chekWeixinLogin:function(){return new Promise(function(t,n){(0,r.getDeviceApi)().checkSession({success:function(){console.log(e("微信登录session_key未过期，ok"," at App.vue:135")),t(!0)},fail:function(){n("微信登录已过期"),console.log(e("expire"," at App.vue:145"))}})})},getAuthorizeStatus:function(){var t=p(a.default.mark(function t(n,c,u){var i,s;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=this,n){t.next=4;break}return o.showToast({title:"请传入scope.type!"}),t.abrupt("return");case 4:return s={"scope.userInfo":"用户信息","scope.userLocation":"地理位置","scope.address":"通讯地址","scope.invoiceTitle":"发票排头","scope.invoice":"获取发票","scope.record":"录音功能","scope.werun":"微信运动步数","scope.writePhotosAlbum":"保存到相册","scope.camera":"摄像头"},t.abrupt("return",new Promise(function(t,o){(0,r.getDeviceApi)().getSetting().then(function(a){if(console.log(e("打印用户授权的情况集合------------",a," at App.vue:175")),a)a[1]&&a[1]["authSetting"]&&a[1]["authSetting"][n]?(console.log(e("--------------检测到已授权了：【".concat(s[n],"】 的权限---------")," at App.vue:180")),c&&c(),t(!0)):(console.log(e("----------检测到未授权：【".concat(s[n],"】 的权限-----------")," at App.vue:186")),u&&u(),t(!1));else try{(0,r.getDeviceApi)().getNetworkType({success:function(e){var t=e.networkType;"none"!=t?o("--------报错了-------------"):(i.error("网络异常"),o("--------网络异常，请先检查网络------------"))}})}catch(p){o("--------报错了-------")}})}));case 6:case"end":return t.stop()}},t,this)}));function n(e,n,o){return t.apply(this,arguments)}return n}(),authorizeAfter_login:function(){var t=p(a.default.mark(function t(){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=p(a.default.mark(function t(n,r){var i;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e("---调用login方法---"," at App.vue:227")),i="",t.next=5,o.login({success:function(){var t=p(a.default.mark(function t(s){var l,f,d,v,h;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e("-----打印uni.login()登录后返回的code------",s.code," at App.vue:239")),i=s.code,!i){t.next=12;break}return t.next=5,o.getUserInfo({lang:"zh_CN"});case 5:l=t.sent,console.log(e("-----授权后通过uni.getUserInfo()获取用户信息返回的结果-----：",l[1]," at App.vue:247")),f=l[1],d=f.iv,v=f.encryptedData,f.signature,f.rawData,h={params:{code:i,encryptedData:v,iv:d,type:""}},u.default.getOpenId(h,!0).then(function(t){if(console.log(e("------------------",t," at App.vue:294")),t&&200==t.statusCode){var a=t.data;a&&1==a.code?(console.log(e("---网络请求返回成功---"," at App.vue:299")),console.log(e("-----调取后台login接口注册用户信息成功后获取openid成功------：",a," at App.vue:300")),c.default.dispatch("setUserToken",a.data.token),c.default.dispatch("setUserId",a.data.customer.id),n(!0)):1018==a.code||(o.showToast({title:"登陆失败"}),r("-----调用后台login接口后返回的状态有问题-----"),console.log(e("---------调用后台login接口后返回的状态有问题-------"," at App.vue:324")))}}).then(p(a.default.mark(function e(){return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))),t.next=14;break;case 12:r("---登陆微信后台 wx.login() 接口返回异常---"),console.log(e("---登陆微信后台 wx.login() 接口返回异常---"," at App.vue:337"));case 14:case"end":return t.stop()}},t,this)}));function s(e){return t.apply(this,arguments)}return s}(),fail:function(t){console.log(e("-----打印登录后------",t," at App.vue:342"))}});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(e(t.t0," at App.vue:346")),r(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()}};t.default=l}).call(this,n("0de9")["default"],n("6e42")["default"])},e8fe:function(e,t,n){"use strict";n.r(t);var o=n("cad4"),a=n.n(o);for(var c in o)"default"!==c&&function(e){n.d(t,e,function(){return o[e]})}(c);t["default"]=a.a}},[["9aa8","common/runtime","common/vendor"]]]);