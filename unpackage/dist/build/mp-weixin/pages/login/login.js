(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0046":function(e,n,t){"use strict";t.r(n);var o=t("0bf0"),i=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,function(){return o[e]})}(r);n["default"]=i.a},"0bf0":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;a(t("1069"));var o=a(t("04cd")),i=t("0fee"),r=t("2f62");function a(e){return e&&e.__esModule?e:{default:e}}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){c(e,n,t[n])})}return e}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=function(){return t.e("pages/components/m-input/m-input").then(t.bind(null,"3ab1"))},f={components:{mInput:u},mixins:[i.miniProApi],data:function(){return{providerList:[],hasProvider:!1,name:"",password:"",positionTop:0,toPageUrl:"../find/find",jumpType:"2"}},computed:s({},(0,r.mapGetters)(["forcedLogin","userToken"])),watch:{userToken:{handler:function(e,n){e&&this.switchPage("../find/find")},immediate:!0}},onLoad:function(e){try{this.toPageUrl=e.toPageUrl,this.jumpType=e.jumpType}catch(n){}},onReady:function(){this.initPosition(),this.initProvider()},methods:{initProvider:function(){var n=this,t=["weixin","qq","sinaweibo"];e.getProvider({service:"oauth",success:function(e){if(e.provider&&e.provider.length){for(var o=0;o<e.provider.length;o++)~t.indexOf(e.provider[o])&&n.providerList.push({value:e.provider[o],image:"../../static/"+e.provider[o]+".png"});n.hasProvider=!0}},fail:function(e){console.error("获取服务供应商失败："+JSON.stringify(e))}})},initPosition:function(){this.positionTop=e.getSystemInfoSync().windowHeight-100},bindLogin:function(){var n=this,t={params:{loginAccount:this.name,password:this.password}};o.default.appLoginAndRegister(t).then(function(t){if(console.log("app登陆成功后打印 res",t),200===t.statusCode&&1===t.data.code){var o=t.data.data.token,i=t.data.data.customer;switch(n.setStorage("userInfo",JSON.stringify(i)),n.setStorage("userToken",o),console.log("login页面中打印冲localstorage中获取到的userToken",e.getStorageSync("userToken")),n.$store.dispatch("setUserToken",o),n.toast("app登录成功"),n.jumpType){case"1":n.switchPage(n.toPageUrl);break;case"2":n.redirectPage(n.toPageUrl);break;case"3":n.reLauchPage(n.toPageUrl);break;case"4":n.navigatePage(n.toPageUrl);break;default:n.switchPage("../find/find")}}else 200===t.statusCode&&1e3===t.data.code&&n.toast("登录密码不正确,请重新输入")})},oauth:function(n){var t=this;this.getDeviceApi().login({provider:n,success:function(o){console.log("[${value}]授权后 通过uni.login()获取到的返回结果res",JSON.stringify(o)),e.getUserInfo({provider:n,success:function(e){console.log("[".concat(n,"]授权登录后 通过uni.getUserInfo获取到的返回结果infoRes"),JSON.stringify(e)),t.getLoginToken(e)}})},fail:function(e){console.error("授权登录失败："+JSON.stringify(e))}})},getLoginToken:function(e){var n={params:{}};o.default.getOpenId(n,!0).then(function(e){})},toWelecome:function(n){this.forcedLogin?e.reLaunch({url:"../main/main"}):e.navigateBack()}}};n.default=f}).call(this,t("543d")["default"])},"1ecc":function(e,n,t){"use strict";var o=t("5911"),i=t.n(o);i.a},"55fa":function(e,n,t){"use strict";t.r(n);var o=t("a8c9"),i=t("0046");for(var r in i)"default"!==r&&function(e){t.d(n,e,function(){return i[e]})}(r);t("1ecc");var a=t("2877"),s=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,"6e4872e8",null);n["default"]=s.exports},5911:function(e,n,t){},a8c9:function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return i})}},[["15b1","common/runtime","common/vendor"]]]);